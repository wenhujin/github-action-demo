name: Matrix with Reusable Workflow

on: [push]

jobs:
  call-reusable-workflow:
    strategy:
      fail-fast: false
      matrix:
        environment: ["production", "staging", "development"]
    runs-on: ubuntu-latest
    steps:
      - uses: ./.github/workflows/common-task.yml
        with:
          environment: ${{ matrix.environment }}
      - name: Echo environment in matrix
        run: echo "Running common task in ${{ inputs.environment }} environment"
      # list files in the repository
      - run: find . -type f
      - run: echo ${{ github.event_name }}
